require=function t(e,a,i){function n(r,o){if(!a[r]){if(!e[r]){var h="function"==typeof require&&require;if(!o&&h)return h(r,!0);if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var _=a[r]={exports:{}};e[r][0].call(_.exports,function(t){var a=e[r][1][t];return n(a?a:t)},_,_.exports,t,e,a,i)}return a[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)n(i[r]);return n}({DragonCtrl:[function(t,e,a){"use strict";if(cc._RFpush(e,"c43f8uuuXpOKoGo8KMKi5PK","DragonCtrl"),!cc.runtime){cc.Class({"extends":cc.Component,editor:{requireComponent:dragonBones.ArmatureDisplay},properties:{_isJumping:!1,_isWalking:!1,_isFalling:!1,playerNumber:1,turnDisplayer:{"default":null,type:cc.Label},_nowTurn:!1},onLoad:function(){var t=this;this._armatureDisplay=this.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisplay.armature(),cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,a){t._keyHandler(e,!0)},onKeyReleased:function(e,a){t._keyHandler(e,!1)}},this.node)},_keyHandler:function(t,e){switch(t){case cc.KEY.q:e&&(this._isJumping=!this._isJumping,this._nowTurn=this.playerNumber-this.turnDisplayer.string,this.jump());break;case cc.KEY.w:e&&(this._isWalking=!this._isWalking,this._nowTurn=this.playerNumber-this.turnDisplayer.string,this.walk());break;case cc.KEY.e:e&&(this._isFalling=!this._isFalling,this._nowTurn=this.playerNumber-this.turnDisplayer.string,this.fall());break;default:return}},jump:function(){this._isJumping&&!this._nowTurn?this._armature.animation.play("jump",-1):this._armature.animation.play("stand",-1)},walk:function(){this._isWalking&&!this._nowTurn?this._armature.animation.play("walk",-1):this._armature.animation.play("stand",-1)},fall:function(){this._isFalling&&!this._nowTurn?this._armature.animation.play("fall",-1):this._armature.animation.play("stand",-1)}})}cc._RFpop()},{}],Game:[function(t,e,a){"use strict";if(cc._RFpush(e,"8c08bMF9nxOTqlcgF5AMoq2","Game"),!cc.runtime){cc.Class({"extends":cc.Component,properties:{player1:{"default":null,type:cc.Node},player2:{"default":null,type:cc.Node},roundDispalyer:{"default":null,type:cc.Label},inputer:{"default":null,type:cc.EditBox},damageDisplayer1:{"default":null,type:cc.Label},damageDisplayer2:{"default":null,type:cc.Label},hpDisplayer1:{"default":null,type:cc.ProgressBar},hpDisplayer2:{"default":null,type:cc.ProgressBar},actions:{"default":null,type:cc.SpriteAtlas},_roundData:[],_armature:[],_attackerFlag:1,_typeFlag:0,_superAttack:0,_damage:0,_HP1:1e3,_HP2:1e3,_presentRound:0,_totalRound:0,_positionX:0,_positionY:0,_gamePlayDuration:1},onLoad:function(){var t=this;this.damageDisplayer=[this.damageDisplayer1,this.damageDisplayer2],this.players=[this.player1,this.player2],cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,a){t._keyHandler(e,!0)},onKeyReleased:function(e,a){t._keyHandler(e,!1)}},this.node)},_keyHandler:function(t,e){switch(t){case cc.KEY.space:e&&this._readData();break;case cc.KEY.p:e&&this._gamePlay();break;case cc.KEY.r:e&&this._return();break;default:return}},_readData:function(){this._roundData=this.inputer.string.split(","),this._attackerFlag=this._roundData[0],this._typeFlag=this._roundData[1],this._superAttack=this._roundData[2],this._damage=this._roundData[3],this._HP1=this._roundData[4],this._HP2=this._roundData[5],this._presentRound=this._roundData[6],this._totalRound=this._roundData[7],this._positionX=this.players[this._attackerFlag].getPositionX(),this._positionY=this.players[this._attackerFlag].getPositionY()},_gamePlay:function(){this.players[this._attackerFlag].getComponent(cc.Sprite).spriteFrame=this.actions.getSpriteFrame("attack-normal"),this.players[this._attackerFlag].runAction(cc.moveTo(.1,100*(.5-this._attackerFlag),this._positionY)),this.players[1-this._attackerFlag].getComponent(cc.Sprite).spriteFrame=this.actions.getSpriteFrame("beat"),this.damageDisplayer[this._attackerFlag].node.opacity=0,this.damageDisplayer[1-this._attackerFlag].node.opacity=255,this.damageDisplayer[1-this._attackerFlag].string="-"+this._damage.toString(),this.hpDisplayer1.progress=this._HP1/1e3,this.hpDisplayer2.progress=this._HP2/1e3,this.roundDispalyer.string=this._presentRound.toString(),this.scheduleOnce(function(){this._return()},this._gamePlayDuration)},_return:function(){this.players[0].getComponent(cc.Sprite).spriteFrame=this.actions.getSpriteFrame("idle"),this.players[1].getComponent(cc.Sprite).spriteFrame=this.actions.getSpriteFrame("idle"),this.players[this._attackerFlag].runAction(cc.moveTo(.1,this._positionX,this._positionY)),this.damageDisplayer[0].node.opacity=0,this.damageDisplayer[1].node.opacity=0}})}cc._RFpop()},{}],Model:[function(t,e,a){"use strict";if(cc._RFpush(e,"1245cmzPtNIG4/mlLpPqr1n","Model"),!cc.runtime){var i="normal",n="aim",s="attack",r=-20,o=3.6,h=1.4*o,l=1*o,_=["weapon_1502b_r","weapon_1005","weapon_1005b","weapon_1005c","weapon_1005d","weapon_1005e"],c=["weapon_1502b_l","weapon_1005","weapon_1005b","weapon_1005c","weapon_1005d"],u=-200,d=-.6;cc.Class({"extends":cc.Component,editor:{requireComponent:dragonBones.ArmatureDisplay},properties:{touchHandler:{"default":null,type:cc.Node},upButton:{"default":null,type:cc.Node},downButton:{"default":null,type:cc.Node},leftButton:{"default":null,type:cc.Node},rightButton:{"default":null,type:cc.Node},_bullets:[],_left:!1,_right:!1,_isJumpingA:!1,_isJumpingB:!1,_isSquating:!1,_isAttackingA:!1,_isAttackingB:!1,_weaponRIndex:0,_weaponLIndex:0,_faceDir:1,_aimDir:0,_moveDir:0,_aimRadian:0,_speedX:0,_speedY:0,_armature:null,_armatureDisplay:null,_weaponR:null,_weaponL:null,_aimState:null,_walkState:null,_attackState:null,_target:cc.p(0,0)},onLoad:function(){var t=this;this._armatureDisplay=this.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisplay.armature(),this._armatureDisplay.addEventListener(dragonBones.EventObject.FADE_IN_COMPLETE,this._animationEventHandler,this),this._armatureDisplay.addEventListener(dragonBones.EventObject.FADE_OUT_COMPLETE,this._animationEventHandler,this),this._armature.getSlot("effects_1").displayController=i,this._armature.getSlot("effects_2").displayController=i,this._weaponR=this._armature.getSlot("weapon_r").childArmature,this._weaponL=this._armature.getSlot("weapon_l").childArmature,this._weaponR.addEventListener(dragonBones.EventObject.FRAME_EVENT,this._frameEventHandler,this),this._weaponL.addEventListener(dragonBones.EventObject.FRAME_EVENT,this._frameEventHandler,this),this._updateAnimation(),dragonBones.WorldClock.clock.add(this._armature),this.touchHandler&&(this.touchHandler.on(cc.Node.EventType.TOUCH_START,function(e){t.attack(!0)},this),this.touchHandler.on(cc.Node.EventType.TOUCH_END,function(e){t.attack(!1)},this),this.touchHandler.on(cc.Node.EventType.TOUCH_MOVE,function(e){var a=e.getTouches(),i=a[0].getLocation();t.aim(i.x,i.y)},this)),this.upButton&&this.upButton.on(cc.Node.EventType.TOUCH_START,function(e){t.jump()},this),this.downButton&&(this.downButton.on(cc.Node.EventType.TOUCH_START,function(e){t.squat(!0)},this),this.downButton.on(cc.Node.EventType.TOUCH_END,function(e){t.squat(!1)},this)),this.leftButton&&(this.leftButton.on(cc.Node.EventType.TOUCH_START,function(e){t._left=!0,t._updateMove(-1)},this),this.leftButton.on(cc.Node.EventType.TOUCH_END,function(e){t._left=!1,t._updateMove(-1)},this)),this.rightButton&&(this.rightButton.on(cc.Node.EventType.TOUCH_START,function(e){t._right=!0,t._updateMove(1)},this),this.rightButton.on(cc.Node.EventType.TOUCH_END,function(e){t._right=!1,t._updateMove(1)},this)),cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,a){t._keyHandler(e,!0)},onKeyReleased:function(e,a){t._keyHandler(e,!1)}},this.node)},_keyHandler:function(t,e){switch(t){case cc.KEY.a:case cc.KEY.left:this._left=e,this._updateMove(-1);break;case cc.KEY.d:case cc.KEY.right:this._right=e,this._updateMove(1);break;case cc.KEY.w:case cc.KEY.up:e&&this.jump();break;case cc.KEY.s:case cc.KEY.down:this.squat(e);break;case cc.KEY.q:e&&this.switchWeaponR();break;case cc.KEY.e:e&&this.switchWeaponL();break;case cc.KEY.space:e&&(this.switchWeaponR(),this.switchWeaponL());break;default:return}},_updateMove:function(t){this._left&&this._right?this.move(t):this._left?this.move(-1):this._right?this.move(1):this.move(0)},move:function(t){this._moveDir!==t&&(this._moveDir=t,this._updateAnimation())},jump:function(){this._isJumpingA||(this._isJumpingA=!0,this._armature.animation.fadeIn("jump_1",-1,-1,0,i),this._walkState=null)},squat:function(t){this._isSquating!==t&&(this._isSquating=t,this._updateAnimation())},attack:function(t){this._isAttackingA!=t&&(this._isAttackingA=t)},switchWeaponL:function(){this._weaponL.removeEventListener(dragonBones.EventObject.FRAME_EVENT,this._frameEventHandler,this),this._weaponLIndex=(this._weaponLIndex+1)%c.length;var t=c[this._weaponLIndex];this._weaponL=this._armatureDisplay.buildArmature(t),this._armature.getSlot("weapon_l").childArmature=this._weaponL,this._weaponL.addEventListener(dragonBones.EventObject.FRAME_EVENT,this._frameEventHandler,this)},switchWeaponR:function(){this._weaponR.removeEventListener(dragonBones.EventObject.FRAME_EVENT,this._frameEventHandler,this),this._weaponRIndex=(this._weaponRIndex+1)%_.length;var t=_[this._weaponRIndex];this._weaponR=this._armatureDisplay.buildArmature(t),this._armature.getSlot("weapon_r").childArmature=this._weaponR,this._weaponR.addEventListener(dragonBones.EventObject.FRAME_EVENT,this._frameEventHandler,this)},aim:function(t,e){0===this._aimDir&&(this._aimDir=10),this._target=this.node.parent.convertToNodeSpaceAR(cc.p(t,e))},update:function(t){this._updatePosition(),this._updateAim(),this._updateAttack(),this._enterFrameHandler(t)},addBullet:function(t){this._bullets.push(t)},_enterFrameHandler:function(t){for(var e=this._bullets.length-1;e>=0;e--){var a=this._bullets[e];a.update()&&this._bullets.splice(e,1)}dragonBones.WorldClock.clock.advanceTime(t)},_animationEventHandler:function(t){t.type===dragonBones.EventObject.FADE_IN_COMPLETE?"jump_1"===t.detail.animationState.name?(this._isJumpingB=!0,this._speedY=-r,this._armature.animation.fadeIn("jump_2",-1,-1,0,i)):"jump_4"===t.detail.animationState.name&&this._updateAnimation():t.type===dragonBones.EventObject.FADE_OUT_COMPLETE&&"attack_01"===t.detail.animationState.name&&(this._isAttackingB=!1,this._attackState=null)},_frameEventHandler:function(t){if("onFire"===t.detail.name){var e=t.detail.armature.getBone("firePoint"),a=cc.p(e.global.x,e.global.y),i=t.detail.armature.display,n=i.convertToWorldSpace(a);this._fire(n)}},_fire:function(t){t.x+=2*Math.random()-1,t.y+=2*Math.random()-1;var e=this._armatureDisplay.buildArmature("bullet_01"),a=this._armatureDisplay.buildArmature("fireEffect_01"),i=this._faceDir<0?Math.PI-this._aimRadian:this._aimRadian,n=new p;n.init(this.node.parent._sgNode,e,a,i+.02*Math.random()-.01,40,t),this.addBullet(n)},_updateAnimation:function(){if(!this._isJumpingA)return this._isSquating?(this._speedX=0,this._armature.animation.fadeIn("squat",-1,-1,0,i),void(this._walkState=null)):void(0===this._moveDir?(this._speedX=0,this._armature.animation.fadeIn("idle",-1,-1,0,i),this._walkState=null):(this._walkState||(this._walkState=this._armature.animation.fadeIn("walk",-1,-1,0,i)),this._moveDir*this._faceDir>0?this._walkState.timeScale=h/o:this._walkState.timeScale=-l/o,this._moveDir*this._faceDir>0?this._speedX=h*this._faceDir:this._speedX=-l*this._faceDir))},_updatePosition:function(){if(0!==this._speedX){this.node.x+=this._speedX;var t=-cc.visibleRect.width/2,e=cc.visibleRect.width/2;this.node.x<t?this.node.x=t:this.node.x>e&&(this.node.x=e)}0!=this._speedY&&(this._speedY>5&&this._speedY+d<=5&&this._armature.animation.fadeIn("jump_3",-1,-1,0,i),this._speedY+=d,this.node.y+=this._speedY,this.node.y<u&&(this.node.y=u,this._isJumpingA=!1,this._isJumpingB=!1,this._speedY=0,this._speedX=0,this._armature.animation.fadeIn("jump_4",-1,-1,0,i),(this._isSquating||this._moveDir)&&this._updateAnimation()))},_updateAim:function(){if(0!==this._aimDir){this._faceDir=this._target.x>this.node.x?1:-1,this.node.scaleX*this._faceDir<0&&(this.node.scaleX*=-1,this._moveDir&&this._updateAnimation());var t=this._armature.getBone("chest").global.y*this.node.scaleY;this._faceDir>0?this._aimRadian=Math.atan2(-(this._target.y-this.node.y+t),this._target.x-this.node.x):(this._aimRadian=Math.PI-Math.atan2(-(this._target.y-this.node.y+t),this._target.x-this.node.x),this._aimRadian>Math.PI&&(this._aimRadian-=2*Math.PI));var e=0;e=this._aimRadian>0?-1:1,this._aimDir!=e&&(this._aimDir=e,this._aimDir>=0?this._aimState=this._armature.animation.fadeIn("aimUp",0,1,0,n,dragonBones.AnimationFadeOutMode.SameGroup):this._aimState=this._armature.animation.fadeIn("aimDown",0,1,0,n,dragonBones.AnimationFadeOutMode.SameGroup)),this._aimState.weight=Math.abs(this._aimRadian/Math.PI*2),this._armature.invalidUpdate()}},_updateAttack:function(){this._isAttackingA&&!this._isAttackingB&&(this._isAttackingB=!0,this._attackState=this._armature.animation.fadeIn("attack_01",-1,-1,0,s,dragonBones.AnimationFadeOutMode.SameGroup),this._attackState.autoFadeOutTime=this._attackState.fadeTotalTime,this._attackState.addBoneMask("pelvis"))}});var p=cc.Class({name:"DragonBullet",_speedX:0,_speedY:0,_armature:null,_armatureDisplay:null,_effect:null,init:function(t,e,a,i,n,s){this._speedX=Math.cos(i)*n,this._speedY=-Math.sin(i)*n;var r=t.convertToNodeSpace(s);if(this._armature=e,this._armatureDisplay=this._armature.display,this._armatureDisplay.setPosition(r),this._armatureDisplay.rotation=i*dragonBones.DragonBones.RADIAN_TO_ANGLE,this._armature.animation.play("idle"),a){this._effect=a;var o=this._effect.display;o.rotation=i*dragonBones.DragonBones.RADIAN_TO_ANGLE,o.setPosition(r),o.scaleX=1+1*Math.random(),o.scaleY=1+.5*Math.random(),Math.random()<.5&&(o.scaleY*=-1),this._effect.animation.play("idle"),dragonBones.WorldClock.clock.add(this._effect),t.addChild(o)}dragonBones.WorldClock.clock.add(this._armature),t.addChild(this._armatureDisplay)},update:function(){this._armatureDisplay.x+=this._speedX,this._armatureDisplay.y+=this._speedY;var t=this._armatureDisplay.parent.convertToWorldSpace(this._armatureDisplay.getPosition());return(t.x<-100||t.x>=cc.visibleRect.width+100||t.y<-100||t.y>=cc.visibleRect.height+100)&&(dragonBones.WorldClock.clock.remove(this._armature),this._armatureDisplay.removeFromParent(),this._armature.dispose(),this._effect&&(dragonBones.WorldClock.clock.remove(this._effect),this._effect.display.removeFromParent(),this._effect.dispose()),!0)}})}cc._RFpop()},{}],"old-Game":[function(t,e,a){"use strict";if(cc._RFpush(e,"0085eBjzqtOyIo8wioKWx/a","old-Game"),!cc.runtime){var i=["walk","jump","fall"];cc.Class({"extends":cc.Component,properties:{player1:{"default":null,type:cc.Node},player2:{"default":null,type:cc.Node},roundDispalyer:{"default":null,type:cc.Label},inputer:{"default":null,type:cc.EditBox},damageDisplayer1:{"default":null,type:cc.Label},damageDisplayer2:{"default":null,type:cc.Label},hpDisplayer1:{"default":null,type:cc.ProgressBar},hpDisplayer2:{"default":null,type:cc.ProgressBar},_roundData:[],_armature:[],_attackerFlag:1,_typeFlag:0,_superAttack:0,_damage:0,_HP1:1e3,_HP2:1e3,_presentRound:0,_totalRound:0},onLoad:function(){var t=this;this._armatureDisplay1=this.player1.getComponent(dragonBones.ArmatureDisplay),this._armatureDisplay2=this.player2.getComponent(dragonBones.ArmatureDisplay),this._armature1=this._armatureDisplay1.armature(),this._armature2=this._armatureDisplay2.armature(),this._armature=[this._armature1,this._armature2],this.damageDisplayer=[this.damageDisplayer1,this.damageDisplayer2],cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,a){t._keyHandler(e,!0)},onKeyReleased:function(e,a){t._keyHandler(e,!1)}},this.node)},_keyHandler:function(t,e){switch(t){case cc.KEY.space:e&&this._gamePlay();break;default:return}},_gamePlay:function(){this._roundData=this.inputer.string.split(","),this._attackerFlag=this._roundData[0],this._typeFlag=this._roundData[1],this._superAttack=this._roundData[2],this._damage=this._roundData[3],this._HP1=this._roundData[4],this._HP2=this._roundData[5],this._presentRound=this._roundData[6],this._totalRound=this._roundData[7],this._armature[this._attackerFlag].animation.play(i[this._typeFlag],-1),this.player1.runAction(cc.moveTo(.5,80,-150)),this.damageDisplayer[this._attackerFlag].node.opacity=0,this.damageDisplayer[1-this._attackerFlag].node.opacity=255,this.damageDisplayer[1-this._attackerFlag].string=this._damage.toString(),this.hpDisplayer1.progress=this._HP1/1e3,this.hpDisplayer2.progress=this._HP2/1e3,this.roundDispalyer.string=this._presentRound.toString()}})}cc._RFpop()},{}]},{},["old-Game","Model","Game","DragonCtrl"]);